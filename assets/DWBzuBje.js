import{K as ae,i as G,e as d,p as ne,f as re,c as n,a as e,k as b,d as ie,t as p,u as l,A as W,F as f,r as y,b as de,w as me,C as S,G as C,L as ce,h as R,o as r}from"./FiMSo64L.js";import{_ as ue}from"./BqzAkCDR.js";import{I as pe}from"./BgohydpB.js";import{u as xe}from"./CIQ5z-mJ.js";const ge={class:"container mx-auto px-4 py-4 md:py-6"},be={class:"max-w-6xl mx-auto"},fe={class:"md:mb-[76px] mb-[56px]"},ye={class:"flex flex-col md:flex-row gap-6 md:gap-8"},ve={class:"text-center md:text-left flex-1"},he={class:"text-xl md:text-3xl xl:text-4xl mb-3 md:mb-4"},we={class:"mb-4 md:mb-6"},ke={class:"mt-4 mb-6"},Se={class:"flex flex-col md:flex-row-reverse items-center justify-center md:justify-start gap-2"},Ce=["width"],Re=["width"],Me=["x","width","height"],Oe={class:"mt-2 text-center md:text-left text-xs text-gray-500 select-all"},Ne={class:"flex justify-center"},Pe={class:"flex flex-col items-center justify-center relative flex-shrink-0"},Te={class:"w-full max-w-md mx-auto rounded-lg shadow-md overflow-hidden relative"},_e=["src"],De={class:"mt-8 md:mt-12"},Ee={class:"hidden md:block"},Ae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ie={class:"bg-white p-4 rounded-lg shadow-md"},Ue={class:"space-y-3"},Le={class:"mt-1 space-y-1"},Ve={class:"bg-white p-4 rounded-lg shadow-md"},je={class:"space-y-3"},qe={class:"mt-1 space-y-1"},Ge={class:"md:hidden"},We={class:"bg-white p-4 rounded-lg shadow-md"},$e={class:"space-y-4"},Ye={class:"space-y-3"},Fe={class:"mt-1 space-y-1"},Be={class:"space-y-3"},He={class:"mt-1 space-y-1"},Ke={class:"mb-4"},ze=["src"],Qe={class:"mb-4 p-4 bg-gray-50 rounded-lg"},Je={class:"flex gap-2 mb-3"},Xe=["disabled"],Ze={class:"flex gap-3 pt-4"},et=["disabled"],tt={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$=800,Y="efw_barcode_value",M=3,T=30,rt={__name:"welcome",setup(st){const F=ae(),_=G(()=>(F.query.by||"Guest").replace(/\+/g," ")),v=d(!1),c=d("Marina Krapivina"),g=d(!1),h=d(!1),u=d(!1),i=d({name:"",company:"",email:""}),D=G(()=>{const o=window.location.href;return`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(o)}`});let E=0,O=0;const B=()=>{E=Date.now()},H=()=>{Date.now()-E>=$&&N()},K=()=>{N()},z=()=>{O=Date.now()},Q=()=>{Date.now()-O>=$&&N()},J=()=>{O=0},N=()=>{v.value=!0},A=()=>{v.value=!1},X=()=>{g.value=!0},I=()=>{g.value=!1,i.value={name:"",company:"",email:""},u.value=!1},U=()=>{h.value=!1},Z=async()=>{if(!u.value){u.value=!0;try{const o={name:i.value.name,company:i.value.company||"",email:i.value.email,inviter:_.value,timestamp:new Date().toISOString(),source:"EFW Registration"},t="https://script.google.com/macros/s/AKfycbzRMPq2FoydiAHKLPpiiGfML6kC9L3PfjObeZ4Pe1S_PryjkoXcJ3NSCk5leq3H--Yx/exec",s=new URLSearchParams({action:"submit",name:o.name,company:o.company,email:o.email,inviter:o.inviter,timestamp:o.timestamp,source:o.source});console.log("Sending registration data:",o),console.log("URL:",`${t}?${s}`);try{const a=await fetch(`${t}?${s}`,{method:"GET",mode:"cors"});if(a.ok){const m=await a.json();console.log("Google Apps Script response:",m),m.success?console.log("✅ Registration successful:",m.message):console.error("❌ Registration failed:",m.error)}else console.error("❌ HTTP error:",a.status,a.statusText)}catch{console.log("CORS error, trying no-cors mode..."),await fetch(`${t}?${s}`,{method:"GET",mode:"no-cors"}),console.log("Registration data sent (no-cors mode)")}g.value=!1,h.value=!0}catch(o){console.error("Registration failed:",o),g.value=!1,h.value=!0}finally{u.value=!1}}},ee=()=>{window.open("https://meyou.id/event/efwss26","_blank")},te=o=>{c.value=o.target.value},se=()=>{if(!c.value.trim())return;const o=c.value.trim().replace(/\s+/g,"+"),s=`${window.location.origin+window.location.pathname}?by=${o}`;D.value=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(s)}`,v.value=!1,setTimeout(()=>{window.location.href=s},100)},{fetchDesigners:oe,designers:L,isDataUpdated:le}=xe(),w=d([]),k=d([]),P=d(""),x=d([]),V=()=>{const o=Date.now(),t=Math.floor(Math.random()*1e6);return`${o}-${t}`},j=o=>{const t=[];for(let s=0;s<o.length;s++){const a=o.charCodeAt(s);for(let m=7;m>=0;m--)t.push(a>>m&1);t.push(0)}return t.slice(0,200)},q=o=>(L.value[o]||[]).filter(s=>s.confirmed).filter(s=>!["NOURA COUTURE","POLINA TROPILLO"].includes((s.name||"").toUpperCase())).map(s=>{const a=s.country||"";return a&&isNaN(Number(a))&&a!=="8"&&a!=="9"?`${s.name} - ${a}`:s.name});return ne(L,()=>{w.value=q("8"),k.value=q("9"),console.log("📅 Дизайнеры 8 ноября:",w.value),console.log("📅 Дизайнеры 9 ноября:",k.value)},{immediate:!0}),re(async()=>{if(console.log("🚀 Welcome: Компонент смонтирован"),console.log("📋 Welcome: Локальные данные уже доступны"),le.value)console.log("📋 Welcome: Данные уже обновлены, используем кэш");else{console.log("🔄 Welcome: Пытаемся обновить данные из Google Sheets...");try{await oe(),console.log("✅ Welcome: Данные обновлены из Google Sheets")}catch{console.log("📋 Welcome: Используем локальные данные (Google Sheets недоступен)")}}try{const o=localStorage.getItem(Y),t=o||V();o||localStorage.setItem(Y,t),P.value=t,x.value=j(t)}catch{const t=V();P.value=t,x.value=j(t)}}),(o,t)=>(r(),n("div",null,[e("div",ge,[e("div",be,[e("section",fe,[e("div",ye,[e("div",ve,[e("h1",he,[t[7]||(t[7]=ie(" Your Emirates Fashion Week invitation by ",-1)),e("span",{class:"inline-block px-2 py-0.5 rounded-md bg-black text-white cursor-pointer select-none",onTouchstartPassive:B,onTouchend:H,onDblclick:K,onMousedown:z,onMouseup:Q,onMouseleave:J},p(l(_))+"*",33)]),t[11]||(t[11]=e("p",{class:"text-sm md:text-base text-gray-600 italic mb-4 md:mb-6"}," (*PRO/Premium tier, authorized to invite) ",-1)),e("div",we,[t[9]||(t[9]=W('<div class="overflow-x-auto"><table class="min-w-full mb-3"><thead><tr class="border-b border-gray-200"><th class="py-2 px-3 text-left text-sm md:text-lg font-medium text-gray-500">Date &amp; Time</th><th class="py-2 px-3 text-left text-sm md:text-lg font-medium text-gray-500">Event</th></tr></thead><tbody><tr class="border-b border-gray-100"><td class="py-2 px-3 text-sm md:text-lg font-medium">8 NOV | SAT 6–10PM</td><td class="py-2 px-3 text-sm md:text-lg text-gray-600">PRÊT-À-PORTER WOMEN&#39;S<br>&amp; MEN&#39;S COLLECTIONS SS 26</td></tr><tr class="border-b border-gray-100"><td class="py-2 px-3 text-sm md:text-lg font-medium">9 NOV | SUN 6–10PM</td><td class="py-2 px-3 text-sm md:text-lg text-gray-600">READY-TO-WEAR COLLECTIONS<br>&amp; Kid&#39;s collections Pop-Up Market</td></tr><tr class="border-b border-gray-100"><td class="py-2 px-3 text-sm md:text-lg font-medium">10 NOV | MON 10AM–6PM</td><td class="py-2 px-3 text-sm md:text-lg text-gray-600">POP-UP MARKET &amp; BEAUTY SERVICES </td></tr><tr><td class="py-2 px-3 text-sm md:text-lg font-medium">11 NOV | TUE 10AM–6PM</td><td class="py-2 px-3 text-sm md:text-lg text-gray-600">POP-UP MARKET &amp; WELLNESS SERVICES</td></tr></tbody></table></div>',1)),e("div",ke,[e("div",Se,[t[8]||(t[8]=e("p",{class:"text-sm md:text-base text-gray-600 md:ml-2 text-center md:text-left"}," This page is your final invitation. No emails, tickets, or confirmations will follow. ",-1)),l(x).length?(r(),n("svg",{key:0,width:M*l(x).length,height:T,role:"img","aria-label":"Access barcode",class:"w-full md:max-w-[260px]"},[e("rect",{width:M*l(x).length,height:T,fill:"#ffffff"},null,8,Re),(r(!0),n(f,null,y(l(x),(s,a)=>(r(),n("rect",{key:a,x:a*M,y:"0",width:s===1?Math.max(1,M-.5):0,height:s===1?T:0,fill:"#000000"},null,8,Me))),128))],8,Ce)):b("",!0)]),e("p",Oe," Code: "+p(l(P)),1)])]),t[12]||(t[12]=e("div",{class:"hidden md:flex gap-4 items-center"},[e("div",{class:"bg-white inline-block max-w-[160px] flex-shrink-0"},[e("img",{src:"https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=https://meyou.id/efwss26%23guests",alt:"QR code for event platform",class:"mb-1 w-full"})]),e("p",{class:"text-sm md:text-base text-gray-600 mb-4"}," If you want VIP seats, please scan this QR code with the phone you'll bring to the event. A quick sign-in and a short note about yourself will serve as your VIP seat request, helping us seat you close to the right people. ")],-1)),e("div",Ne,[de(ue,{variant:"primary",onClick:X},{default:me(()=>t[10]||(t[10]=[e("span",null,"Confirm & Add to Calendar",-1)])),_:1,__:[10]})])]),e("div",Pe,[e("div",Te,[e("img",{src:l(pe),alt:"Emirates Fashion Week 2025",class:"w-full md:h-auto md:max-h-unset max-h-[65vh] h-[65vh] object-cover md:max-w-md hidden lg:block"},null,8,_e)])])])]),t[25]||(t[25]=e("section",{class:"md:mb-[76px] mb-[56px]"},[e("h2",{class:"text-2xl md:text-3xl font-bold uppercase text-left mb-8"},"Location"),e("p",{class:"text-sm md:text-base text-gray-600 mb-4"},"Skylight Gallery. Arjaan by Rotana. Dubai Media City"),e("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1185.1534268127045!2d55.15329961837267!3d25.095293069615156!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3e5f6b44056573e7%3A0xc77c77051f31ecc!2sArjaan%20by%20Rotana%20Dubai!5e1!3m2!1sru!2sae!4v1757573179410!5m2!1sru!2sae",width:"100%",height:"400",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",class:"rounded-lg"})],-1)),e("div",De,[t[24]||(t[24]=e("h2",{class:"text-2xl md:text-3xl font-bold uppercase text-left mb-4 md:mb-6"},"Fashion Show",-1)),e("div",Ee,[e("div",Ae,[e("div",Ie,[t[14]||(t[14]=e("h3",{class:"text-base font-medium text-gray-800 mb-3"},"November 8, 2025",-1)),e("div",Ue,[e("div",null,[t[13]||(t[13]=e("h4",{class:"text-base md:text-lg font-medium text-gray-700"},"Doors open 6PM",-1)),e("ul",Le,[(r(!0),n(f,null,y(l(w),s=>(r(),n("li",{key:s,class:"text-sm text-gray-600"},p(s),1))),128))])])])]),e("div",Ve,[t[17]||(t[17]=e("h3",{class:"text-base font-medium text-gray-800 mb-3"},"November 9, 2025",-1)),e("div",je,[e("div",null,[t[15]||(t[15]=e("h4",{class:"text-base md:text-lg font-medium text-gray-700"},"Doors open 6PM",-1)),e("ul",qe,[(r(!0),n(f,null,y(l(k),s=>(r(),n("li",{key:s,class:"text-sm text-gray-600"},p(s),1))),128))]),t[16]||(t[16]=e("p",{class:"text-sm text-gray-700 font-semibold mt-2"},"FASHION SHOW BY TOP FASHION STYLISTS",-1))])])])])]),e("div",Ge,[e("div",We,[t[23]||(t[23]=e("h3",{class:"hidden md:block text-2xl md:text-3xl font-bold uppercase text-gray-800 mb-3 text-left"},"Fashion Show",-1)),e("div",$e,[e("div",null,[t[19]||(t[19]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"November 8, 2025",-1)),e("div",Ye,[e("div",null,[t[18]||(t[18]=e("h5",{class:"text-sm font-medium text-gray-600"},"Doors open 6PM",-1)),e("ul",Fe,[(r(!0),n(f,null,y(l(w),s=>(r(),n("li",{key:s,class:"text-xs text-gray-600"},p(s),1))),128))])])])]),e("div",null,[t[22]||(t[22]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"November 9, 2025",-1)),e("div",Be,[e("div",null,[t[20]||(t[20]=e("h5",{class:"text-sm font-medium text-gray-600"},"Doors open 6PM",-1)),e("ul",He,[(r(!0),n(f,null,y(l(k),s=>(r(),n("li",{key:s,class:"text-xs text-gray-600"},p(s),1))),128))]),t[21]||(t[21]=e("p",{class:"text-xs text-gray-700 font-semibold mt-2"},"FASHION SHOW BY TOP FASHION STYLISTS",-1))])])])])])])])])]),l(v)?(r(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:A},[e("div",{class:"bg-white rounded-lg p-6 max-w-sm w-full text-center",onClick:t[1]||(t[1]=R(()=>{},["stop"]))},[t[27]||(t[27]=e("h3",{class:"text-lg font-semibold mb-4"},"Share this invitation",-1)),e("div",Ke,[e("img",{src:l(D),alt:"QR Code for invitation",class:"mx-auto w-48 h-48"},null,8,ze)]),e("div",Qe,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2 text-left"}," Authorized to invite ",-1)),e("div",Je,[S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>ce(c)?c.value=s:null),type:"text",placeholder:"Marina Krapivina",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onInput:te},null,544),[[C,l(c)]]),e("button",{onClick:se,class:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors",disabled:!l(c).trim()}," OK ",8,Xe)])]),t[28]||(t[28]=e("p",{class:"text-sm text-gray-600 mb-4"}," Scan this QR code to share your invitation ",-1)),e("button",{onClick:A,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors"}," Close ")])])):b("",!0),l(g)?(r(),n("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:I},[e("div",{class:"bg-white rounded-lg p-6 max-w-md w-full",onClick:t[5]||(t[5]=R(()=>{},["stop"]))},[t[33]||(t[33]=e("h3",{class:"text-lg font-semibold mb-4"},"Confirm Your Attendance",-1)),e("form",{onSubmit:R(Z,["prevent"]),class:"space-y-4"},[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Name* ",-1)),S(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l(i).name=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your full name"},null,512),[[C,l(i).name]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Company ",-1)),S(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l(i).company=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your company name"},null,512),[[C,l(i).company]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Email (for Calendar reminder)* ",-1)),S(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l(i).email=s),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your@email.com"},null,512),[[C,l(i).email]])]),e("div",Ze,[e("button",{type:"button",onClick:I,class:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:!l(i).name||!l(i).email||l(u),class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[l(u)?(r(),n("svg",tt,t[32]||(t[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):b("",!0),e("span",null,p(l(u)?"Sending...":"OK"),1)],8,et)])],32)])])):b("",!0),l(h)?(r(),n("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:U},[e("div",{class:"bg-white rounded-lg p-6 max-w-md w-full text-center",onClick:t[6]||(t[6]=R(()=>{},["stop"]))},[t[35]||(t[35]=W('<div class="mb-4"><svg class="w-16 h-16 text-green-600 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg><h3 class="text-lg font-semibold text-gray-800 mb-2">You&#39;re officially on the Guest List!</h3><p class="text-gray-600 mb-6">Your Google Calendar reminder is on its way to your email</p></div>',1)),e("div",{class:"mb-6 p-4 bg-gray-50 rounded-lg"},[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600 mb-3"}," Optional: Share a few words about your usefulness, and we'll do our best to place you with matching VIPs ",-1)),e("button",{onClick:ee,class:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors"}," Request Reserved Seat ")]),e("button",{onClick:U,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors"}," Close ")])])):b("",!0)]))}};export{rt as default};
