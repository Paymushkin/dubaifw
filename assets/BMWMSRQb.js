import{_ as S,u as E,r as d,e as L,f as g,k as C,g as I,c as o,o as n,a as l,F as y,d as b,t as _,i as P,b as Q,n as f,w as H,j as B,v as T,T as z}from"./tAOOJacp.js";const N={class:"text-xl md:text-3xl xl:text-4xl mb-8 md:mb-12"},O={key:0,class:"text-center py-8"},R={key:1,class:"text-center py-8"},$={class:"text-red-600"},j={key:2,class:"flex flex-col gap-4"},G=["id"],M=["onClick"],U={class:"text-base md:text-xl xl:text-2xl pr-8 text-left"},V=["innerHTML"],K={__name:"FaqSectionDynamic",props:{standalone:{type:Boolean,default:!1}},setup(p){const q=E(),u=d(q.hash.slice(1)),r=d([]),i=d(!0),c=d(""),t=d({}),x=a=>a.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").substring(0,50),k=async()=>{try{console.log("FaqSectionDynamic: fetchFaq called"),i.value=!0,c.value="";const a=window.location.hostname.includes("localhost")||window.location.hostname.includes("127.0.0.1")||window.location.hostname.includes("0.0.0.0");if(console.log("FaqSectionDynamic: isLocal =",a),console.log("FaqSectionDynamic: hostname =",window.location.hostname),a){console.log("FaqSectionDynamic: Using local API");try{const s=await $fetch("/api/faq");console.log("FaqSectionDynamic: API response =",s),s.success?(r.value=s.faq.map(e=>({id:x(e.question),question:e.question,answer:e.answer})),console.log("FaqSectionDynamic: FAQ items loaded =",r.value.length)):c.value=s.error||"Ошибка загрузки FAQ"}catch(s){console.error("FaqSectionDynamic: API Error:",s),r.value=[],c.value="Сервис временно недоступен"}i.value=!1}else{const s="https://script.google.com/macros/s/AKfycbyJofyXQHr2G9RXPbdOhE8dvl10HDSIgz9tZEB_rlz4gg22btKAyPBDhelmlEqY0n8z/exec",e="callback_faq_"+Date.now();window[e]=h=>{h&&h.success?r.value=h.faq.map(m=>({id:x(m.question),question:m.question,answer:m.answer})):c.value=h.error||"Ошибка загрузки FAQ",i.value=!1,delete window[e],document.head.removeChild(v)};const v=document.createElement("script");v.src=`${s}?action=getFaq&callback=${e}`,document.head.appendChild(v)}}catch(a){console.error("Error fetching FAQ:",a),c.value="Ошибка загрузки FAQ",i.value=!1}},F=L(()=>r.value),D=a=>{t.value[a]=!t.value[a]},A=()=>{u.value&&(t.value[u.value]=!0)};g(async()=>{await k(),await C(),A()});const w=()=>{const a=window.location.hash.slice(1);a&&a!==u.value&&(Object.keys(t.value).forEach(s=>{t.value[s]=!1}),t.value[a]=!0,u.value=a)};return g(()=>{window.addEventListener("hashchange",w)}),I(()=>{window.removeEventListener("hashchange",w)}),(a,s)=>(n(),o("section",{class:f(["container mx-auto px-4",{"py-20 md:py-[100px]":!p.standalone},{"py-[60px] md:py-[120px]":p.standalone}])},[l("h2",N,[p.standalone?(n(),o(y,{key:0},[b(" Frequently Asked Questions ")],64)):(n(),o(y,{key:1},[b(" FAQ ")],64))]),i.value?(n(),o("div",O,s[0]||(s[0]=[l("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-black"},null,-1)]))):c.value?(n(),o("div",R,[l("p",$,"Ошибка загрузки FAQ: "+_(c.value),1)])):(n(),o("div",j,[(n(!0),o(y,null,P(F.value,e=>(n(),o("div",{key:e.id,id:e.id},[l("div",{class:"border border-black cursor-pointer",onClick:v=>D(e.id)},[l("div",{class:f(["w-full p-4 md:p-6 flex justify-between items-start hover:bg-gray-50",{"border-b border-black":t.value[e.id]}])},[l("span",U,_(e.question),1),l("span",{class:f(["text-2xl transform transition-transform duration-300 flex-shrink-0",{"rotate-45":t.value[e.id]}])},"+",2)],2),Q(z,{"enter-active-class":"transition duration-500 ease-out","enter-from-class":"transform scale-y-95 -translate-y-1 opacity-0","enter-to-class":"transform scale-y-100 translate-y-0 opacity-100","leave-active-class":"transition duration-400 ease-in-out","leave-from-class":"transform scale-y-100 translate-y-0 opacity-100","leave-to-class":"transform scale-y-95 -translate-y-1 opacity-0"},{default:H(()=>[B(l("div",{class:"p-4 md:p-6 text-sm md:text-base xl:text-lg text-black-70 border-t border-black origin-top",innerHTML:e.answer},null,8,V),[[T,t.value[e.id]]])]),_:2},1024)],8,M)],8,G))),128))]))],2))}},J=S(K,[["__scopeId","data-v-af96117c"]]);export{J as F};
