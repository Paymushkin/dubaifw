import{_ as A,u as P,r as v,e as E,f as w,k as Q,g as L,c as l,o as c,a as r,F as p,d as b,t as q,i as C,b as I,n as f,w as N,j as H,v as O,T as B}from"./DsMpGwuZ.js";const T={class:"text-xl md:text-3xl xl:text-4xl mb-8 md:mb-12"},z={key:0,class:"text-center py-8"},J={key:1,class:"text-center py-8"},R={class:"text-red-600"},$={key:2,class:"flex flex-col gap-4"},j=["id"],G=["onClick"],M={class:"text-base md:text-xl xl:text-2xl pr-8 text-left"},U=["innerHTML"],V={__name:"FaqSectionDynamic",props:{standalone:{type:Boolean,default:!1}},setup(h){const F=P(),m=v(F.hash.slice(1)),t=v([]),d=v(!0),n=v(""),o=v({}),x=a=>a.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").substring(0,50),_=async()=>{try{console.log("FaqSectionDynamic: fetchFaq called"),d.value=!0,n.value="";const a=window.location.hostname.includes("localhost")||window.location.hostname.includes("127.0.0.1")||window.location.hostname.includes("0.0.0.0");if(console.log("FaqSectionDynamic: isLocal =",a),console.log("FaqSectionDynamic: hostname =",window.location.hostname),a){console.log("FaqSectionDynamic: Using local API");try{const s=await $fetch("/api/faq");console.log("FaqSectionDynamic: API response =",s),s.success?(t.value=s.faq.map(e=>({id:x(e.question),question:e.question,answer:e.answer})),console.log("FaqSectionDynamic: FAQ items loaded =",t.value.length)):n.value=s.error||"Ошибка загрузки FAQ"}catch(s){console.error("FaqSectionDynamic: API Error:",s),t.value=[],n.value="Сервис временно недоступен"}d.value=!1}else{const s="https://script.google.com/macros/s/AKfycbyJofyXQHr2G9RXPbdOhE8dvl10HDSIgz9tZEB_rlz4gg22btKAyPBDhelmlEqY0n8z/exec",e="callback_faq_"+Date.now();window[e]=u=>{console.log("FaqSectionDynamic: JSONP callback received:",u),u&&u.success&&u.faq?(t.value=u.faq.map(y=>({id:x(y.question),question:y.question,answer:y.answer})),console.log("FaqSectionDynamic: FAQ items loaded from JSONP =",t.value.length)):(console.log("FaqSectionDynamic: JSONP failed or no data received"),n.value=u.error||"Ошибка загрузки FAQ данных",t.value=[]),d.value=!1,delete window[e],i&&i.parentNode&&document.head.removeChild(i)};const i=document.createElement("script");i.src=`${s}?action=getFaq&callback=${e}`,i.onerror=()=>{console.log("FaqSectionDynamic: JSONP script failed"),n.value="Ошибка загрузки FAQ данных",t.value=[],d.value=!1,delete window[e]},document.head.appendChild(i)}}catch(a){console.error("Error fetching FAQ:",a),n.value="Ошибка загрузки FAQ",d.value=!1}},k=E(()=>t.value),S=a=>{o.value[a]=!o.value[a]},D=()=>{m.value&&(o.value[m.value]=!0)};w(async()=>{await _(),await Q(),D()});const g=()=>{const a=window.location.hash.slice(1);a&&a!==m.value&&(Object.keys(o.value).forEach(s=>{o.value[s]=!1}),o.value[a]=!0,m.value=a)};return w(()=>{window.addEventListener("hashchange",g)}),L(()=>{window.removeEventListener("hashchange",g)}),(a,s)=>(c(),l("section",{class:f(["container mx-auto px-4",{"py-20 md:py-[100px]":!h.standalone},{"py-[60px] md:py-[120px]":h.standalone}])},[r("h2",T,[h.standalone?(c(),l(p,{key:0},[b(" Frequently Asked Questions ")],64)):(c(),l(p,{key:1},[b(" FAQ ")],64))]),d.value?(c(),l("div",z,s[0]||(s[0]=[r("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-black"},null,-1)]))):n.value?(c(),l("div",J,[r("p",R,"Ошибка загрузки FAQ: "+q(n.value),1)])):(c(),l("div",$,[(c(!0),l(p,null,C(k.value,e=>(c(),l("div",{key:e.id,id:e.id},[r("div",{class:"border border-black cursor-pointer",onClick:i=>S(e.id)},[r("div",{class:f(["w-full p-4 md:p-6 flex justify-between items-start hover:bg-gray-50",{"border-b border-black":o.value[e.id]}])},[r("span",M,q(e.question),1),r("span",{class:f(["text-2xl transform transition-transform duration-300 flex-shrink-0",{"rotate-45":o.value[e.id]}])},"+",2)],2),I(B,{"enter-active-class":"transition duration-500 ease-out","enter-from-class":"transform scale-y-95 -translate-y-1 opacity-0","enter-to-class":"transform scale-y-100 translate-y-0 opacity-100","leave-active-class":"transition duration-400 ease-in-out","leave-from-class":"transform scale-y-100 translate-y-0 opacity-100","leave-to-class":"transform scale-y-95 -translate-y-1 opacity-0"},{default:N(()=>[H(r("div",{class:"p-4 md:p-6 text-sm md:text-base xl:text-lg text-black-70 border-t border-black origin-top",innerHTML:e.answer},null,8,U),[[O,o.value[e.id]]])]),_:2},1024)],8,G)],8,j))),128))]))],2))}},X=A(V,[["__scopeId","data-v-93173780"]]);export{X as F};
